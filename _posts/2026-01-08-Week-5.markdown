---
layout: post
title:  "Week 5"
categories: jekyll update
---

## UI

Added a crosshair and a text element to the UI to show that the player can interact with an object.

## Gameplay

Improved the behaviour of projectiles. Switched hit detection from collisions to raycasting which allows arbitrary projectile speeds.
Further, arrows can now stick to objects (disabling physics, i.e. setting rigidbody to be kinematic) and fall down when that object gets destroyed (i.e. enabling physics).
In particular, arrows now get attached to the animation bones of the opponent, thereby also matching its movements.

With these changes, arrows now stay in the scene and can be picked up after being shot.

## Balancing

Added a component to define dungeon properties depending on the level.
These definitions should be used by the dungeon generation algorithm.

By Axel Schneewind

## Assets:

Minor flaws in the mesh of the existing bow and quiver models were fixed.
Textures and materials were then created for these models.

<img width="300" alt="Textured Bow" src="{{ '/images/textured-bow.png' | relative_url }}">

<img height="400" alt="Textured Quiver" src="{{ '/images/textured-quiver.png' | relative_url }}">

Textures and materials were also created for the new warrior model designed by Guanpu Tian.

<img width="300" alt="Textured Warrior" src="{{ '/images/textured-warrior.png' | relative_url }}">

By Rene Tischler

## Dungeon Creation:

During dungeon generation, instantiated assets are no longer placed arbitrary in the scene hierarchy.
The generated level is divided into segments, and the assets are instantiated as children of these segments.
This makes the scene hierarchy much less cluttered.

Furthermore, ceiling meshes are now also generated. Both the floor and the ceiling now use their intended materials.

<img width="300" alt="Current Game View" src="{{ '/images/floor-ceiling.png' | relative_url }}">

Torches are also placed as evenly as possible on the walls so that they can illuminate the dungeon in the future.

<img width="300" alt="Placed Torches" src="{{ '/images/placed-torches.png' | relative_url }}">

By Rene Tischler

## Akward Corridor Fix

<img width="300" alt="Akward Corridor Example" src="{{ '/images/akward_corridor.png' | relative_url }}">

During the dungeon creation the calculations of the corridors could end in "awkward" corridors, how we call them.
The Probleme can be seen in the reference picture. The Algorithm could choose the left room to connect to the bottom room.
But since the connecting space between the rooms is insufficent a barley or not even passable corridor is placed.
To fix this error, the corner of all possible rooms for connecting two partions are checked. For example in the reference picture the 
length of the left bottom corner of the top room to the right top corner of the bottom room and vice versa. Dividing now the smaller length by
the lager length gives a proportion from 0 to 1, on how much the rooms overlap with eachother. With 1 meaning they overlap 100% and
0 meaning they dont overlap at all. Now the Algorthim searches for the largest proportion and with that the probleme of akward corridors is fixed.

By Sven Gerber

## Game Saving

A minor bug that prevented the game save file from loading correctly has been fixed in the game save system developed by David.

By Rene Tischler
