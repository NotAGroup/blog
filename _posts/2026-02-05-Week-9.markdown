---
layout: post
title:  "Week 9"
categories: jekyll update
---

## Lighting

Improved the flickering effect on the torches by introducing a
mass-spring-damper model that simulates the intensity swinging
back to normal after a flicker 'event' occured. This looks far 
more natural than the exponential falloff we used so far.

Set the torch color to be slightly more neutral. Set the ambient
color of the scene to be a bluish gray, which is visible
in unlit areas. This gives the dungeon a colder touch and enhances
the contrast to bright areas around the torches.

<img width="300" alt="Improved flickering" src="{{site.imgpath}}/torch-flicker.gif">

## UI

Implemented mouse-based input for the inventory and upgrade screen.
In the inventory, items can be moved by clicking the source and slots.

Added two ui elements that show the total number of specific items.
One is added to display all items of ammunition type (i.e. arrows)
with their respective count in the inventory. A second one is added
to show all buff items in the inventory (i.e. runes) with their counts.
This way, the player can always see how many arrows they have left
without opening the inventory.

Further, switched most UI components (mainly those related to inventory
and upgrades) to event-based updating instead of polling.
This nice performance-wise as ui elements might have to do some computation
that should not be performed each frame (e.g. the new uis mentioned above
have to traverse the whole inventory to compute their numbers).

## Balancing

Filled out missing definitions for player upgrades and removed the
perception stat as it is not really used currently and would require
changes to game logic. 
I implemented the soft class system as mentioned in the presentation.

By Axel Schneewind


## last Touches on the Boss Door.
I integrated the boss door animation and made some last adjustments.
It wasnt exactly clear if the legacy or the modern animation system would be better.
While i startet with the legacy System. It was not able to make it work, or rather make it not work.
It imedatly openend at the beginning of the level.
So i switch over to the modern system. While i had some problem figuring it out, i havent used it before. I made it work.
Now we have Barricade to the bossroom that only opens when the level is cleared.

## Healthbar
I tried implementing health indicators. the should consist of two parts. The enemies shoud light up or have particle effects when taking damage and all Enemies should get a healthbar.
Right above there heads...or whatever the slimes have.
After an Disucssion if we should use a bunch of canvases or one whole canvas. I decided to simply use a plane, for everyone.
Always Turning in the direction of the player. But i ran out of Time before i could got it to work.