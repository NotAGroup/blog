---
layout: post
title:  "Week 6"
categories: jekyll update
---

## Combat System & Enemy Behavior

To improve code clarity, old unused scripts for the swords were removed.
Furthermore, the hit zone and opponent classes were made abstract in order to inherit them and avoid code duplication.

The behavior of the melee skeleton has been revised.
As soon as it reaches a nav point, the skeleton turns toward the center of the room to look around.
This increases the probability that the player will be seen.
If the skeleton is hit by an arrow while walking, it now stops and turns in the direction the arrow came from.

These changes are preparations to enable additional types of opponents.
We are currently working on adding a ranged skeleton.
A corresponding prefab has already been created, and the corresponding animator controller that uses the necessary animations is currently being created.

The number of error messages caused by the RuntimeNavMeshBuilder has been drastically reduced.
To achieve this, models that are irrelevant for the movement freedom of opponents have been moved to other layers.
For models that are relevant, the NavMeshObstacle component has been moved to the correct object.
This led to a more reliable construction of the NavMesh.
Now only TextMesh Pro meshes cause error messages at startup, even though they are located in their own UI layer, which should be ignored by the RuntimeNavMeshBuilder.

By Rene Tischler

## Animations

Movement and Attack animations of the opponents and the player now scale with their corresponding factors given in the stats. Additionally, the player animations have been made generally slower as they were looking whimsical, especially when sprinting. The combat animation layer for the player now also uses an avatar mask so that it only applies to the relevant parts of the player model. The bow and quiver models have been added to the player prefab and become visible only when in the corresponding firing mode. Some setup work has been done to use the proper bow animations when the bow is in use, however a new shooting mechanic is going to be required to make proper use of the draw and release animations where the player first has to draw the bow, and the shot is only made on release. As such, the bow animations are still unfinished.

By Moritz Mahling
