---
layout: post
title:  "Week 8"
categories: jekyll update
---

## Assets

This week, Guanpu Tian added our first boss monster model.
The model represents some sort of demonic overlord.
Appropriate textures and materials were created for this model.

<img width="300" alt="Demonic Overlord" src="{{site.imgpath}}/overlord.png">

By Rene Tischler

## Assets 2

Also the Boss room door is now exported and integrated into unity.
Which was astonashingly difficult. Because i need one the one side my laptop got overwhelmed by the model.
But also how do export and import the materials from unity to blender. Because the material systems are not fully compatible.

After a lot of trial and error i got a worklfow where is used the basic materials of unity and baked textures in blender. Atleast a color map and a normal map and some even smothness for metalic effects.
That of curse for the wood of the door the skull, the rim of the door the rivets and the wall.
The last one even got a new model, where the bricks physicall extend from the wall.

The animation was easier to export, but i had some trouble getting animations to work in unity, because i had never used either animation system. So i tried both.
At the end i wen for the new animation system, even if i only have animation that dosnt need blending.

I am quite happy, because the door does not simply open. But the skull first looks angry, before the wings of the door start to swing open with increasing force. Before the smah into the wall and get thrown back a little before fully opening.

Then i only need to subscribe the end of the animation to remove alpha wall. I thought for a sceond if i should implement a realisting collision for the door. Which would allow the the player to try to squees through the opening door wings...but this is way is far simpler.

By David Ruff

## Enemy Behavior

To eliminate the glitch that caused our two opponent types to freeze during combat,
the base class and the two skeleton classes were reworked again.
Several variables that allowed the skeletons to enter an undefined state, from which they could not recover,
were removed and replaced with an enum variable for determining their state.
This ensured the desired state stability.
Furthermore, for better handling, we switched to coroutines for the hit zone and projectiles.
This allows us to better coordinate with the animations without the need for all the timers in the update function.

By Rene Tischler

## Slime Behavior

Create Slime behavior.
All slime animation is shader program calculated in real time instead of skeletton animation.
It should seem very bouncy, juicy and jelly. 
Once it found player, it will chase player slowly until death.
Slime will jump to player to attack with a low damage. When It attack it will turn into red.
Slime also has a high health, which means it is hard to kill. 
Although it is slow and low damage, but it keep chasing and attacking, which makes it a kind of very annoying enemy.
But arrow can cause double damage to slime, and when it get hit by player, it will be pushed back for a distance, so player can have a breath.

By Guanpu Tian

## Animation IK And Bow Logic For Warriors

Implemente the logic how player can draw a bow, hold a bow and release to shoot.
Use IK to align warrior animation and bow animation to make Warrior's finger on bow string when drawing and holding.
Use a dummy arrow to indicate player you have arrow on bow. 
But because the dumy arrow points not into monitor center, so it is not the arrow which be shot. 
The arrow shot will generate when player release the bow, and the dummy arrow will transfer into quiver.
When player has no more arrow, there is no dummy arrow when drawing the bow, which can notify player, that your quiver is empty now.

By Guanpu Tian

## Level Generation (Items)

Improved loot placement in the level.
Until now, we only had chests with some random items as loot.

Now, I implemented attaching loot to any object such that the loot gets dropped
on destruction. With that, we can attach loot to enemies and have them drop it
when dying.

I improved the level generation such that first, a budget of loot is sampled.
Here, the level parameters are used (available gold, available xp, ammunition per enemy).
Then, when placing chests and enemies in the scene, random loot from that budget
can be added to them.
Further, now the dungeon creator also places one large chest in the level, which
has more loot. The loot for this large chest is sampled from an exponential
distribution (independent of loot budget), to make it more unpredictable.

## Level Generation

Tweaked torch placement such that we have them slightly further spaced.
Increased the intensity of torches such that the dungeon remains bright enough.
Also, until now we had 3 light sources per torch, which I now replaced by one
such that we dont get issues with limitations in the number of light sources.

### Enemies spawning

Enhanced enemy spawning. Now these get spawned in a (poisson distributed)
number of groups, each with a poisson distributed number of enemies.

I use poisson distributions because they make it easy to balance the expected
amount and expected number of enemy groups per level, while still achieving
a lot of perceived randomness and unpredictability.

By Axel Schneewind

## Animations

Further bug fixes for all animations and refinement of the bow shooting animations to allow for charging and holding the bow before releasing to shoot.

By Moritz Mahling

